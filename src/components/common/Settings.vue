<template>
	<div>
		<button ref="btn" class="settings-btn">
			<svg class="icon" width="40px" height="36px" viewBox="0 0 1080 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M285.113725 509.992157a265.035294 261.019608 90 1 0 522.039216 0 265.035294 261.019608 90 1 0-522.039216 0Z" fill="#E9EAEB" /><path d="M871.403922 247.633987l-76.29804 76.298039c-5.354248 5.354248-13.385621 5.354248-18.739869 0L720.146405 267.712418c-5.354248-5.354248-5.354248-13.385621 0-18.739869l76.298039-76.298039c-49.526797-26.771242-96.376471-17.401307-132.517647 18.739869l-28.109804 28.109804c-33.464052 33.464052-25.43268 80.313725-9.369934 123.147712L200.784314 768.334641c-16.062745 16.062745-16.062745 41.495425 0 56.219607l18.739869 18.73987c16.062745 16.062745 41.495425 16.062745 56.219608 0l425.662745-425.662745c42.833987 16.062745 89.68366 22.755556 121.80915-10.708497l28.109804-28.109804c37.479739-36.141176 45.511111-82.99085 20.078432-131.179085z" fill="#FFFFFF" /><path d="M246.295425 868.726797c-13.385621 0-26.771242-5.354248-37.479739-16.062745l-18.739869-18.739869c-21.416993-21.416993-21.416993-54.881046 0-76.298039l420.308497-420.308497c-9.369935-28.109804-26.771242-88.345098 14.724183-129.840523l28.109804-28.109804c41.495425-41.495425 95.037908-49.526797 148.580392-21.416993l16.062745 8.031372-88.345098 88.345098 56.219608 56.219608 88.345098-88.345098 9.369934 18.739869c28.109804 52.203922 20.078431 107.084967-21.416993 148.580393l-28.109804 28.109804c-29.448366 29.448366-72.282353 34.802614-128.501961 16.062745L285.113725 854.002614c-10.708497 9.369935-24.094118 14.724183-38.8183 14.724183z m392.198693-531.40915c4.015686 8.031373 2.677124 9.369935-54.881046 66.928105l-374.797386 373.458823c-5.354248 5.354248-8.031373 12.047059-8.031372 18.739869 0 6.69281 2.677124 13.385621 8.031372 18.73987l18.73987 18.739869c10.708497 10.708497 26.771242 10.708497 37.479738 0l250.311111-250.311111 123.147713-123.147713c57.55817-57.55817 58.896732-58.896732 66.928104-54.881045 49.526797 18.739869 84.329412 16.062745 107.084968-6.692811l28.109803-28.109804c29.448366-29.448366 37.479739-62.912418 24.094118-100.392157L803.137255 331.963399c-10.708497 10.708497-28.109804 10.708497-37.479739 0L709.437908 275.743791c-10.708497-10.708497-10.708497-26.771242 0-37.479739l61.573857-61.573856c-36.141176-13.385621-70.943791-5.354248-100.392157 24.094118l-26.771242 26.771242c-22.755556 24.094118-25.43268 57.55817-5.354248 109.762091z" fill="#2A5082" /><path d="M227.769725 796.297203l18.927268-18.927268 18.927268 18.927268-18.927268 18.927268z" fill="#2A5082" /><path d="M339.994771 211.49281l-14.724183-22.755555c93.699346-62.912418 210.154248-81.652288 318.577778-50.86536l-6.69281 25.43268c-101.730719-26.771242-210.154248-9.369935-297.160785 48.188235zM200.784314 698.729412c-62.912418-115.11634-62.912418-257.003922 0-372.120262l24.094117 13.385621c-58.896732 107.084967-58.896732 239.602614 0 346.687582l-24.094117 12.047059zM539.440523 899.513725c-70.943791 0-141.887582-18.739869-203.461438-57.558169l13.385621-22.755556C455.111111 883.45098 588.96732 890.143791 698.729412 833.924183l12.047059 24.094118c-52.203922 28.109804-111.100654 41.495425-171.335948 41.495424zM862.033987 726.839216l-22.755556-14.724183c61.573856-91.022222 77.636601-208.815686 41.495425-314.562092l25.43268-8.031372c38.818301 112.439216 21.416993 239.602614-44.172549 337.317647z" fill="#BCC0C4" /><path d="M264.647111 757.893856l388.062536-388.075921 18.940654 18.927268-388.062536 388.062536z" fill="#2A5082" /><path d="M606.368627 645.186928L321.254902 361.411765l-46.849673-9.369935-76.298039-113.777778 38.8183-38.8183 113.777778 76.298039 9.369935 46.849673 283.775163 283.775163z" fill="#FFFFFF" /><path d="M606.368627 663.926797L314.562092 373.458824l-48.188236-9.369935-84.329412-127.163399 53.542484-53.542483 127.163399 84.329411 9.369934 48.188236 290.467974 290.467973-56.219608 57.55817zM282.436601 339.994771l45.511111 9.369935 277.082353 277.082353 18.73987-18.739869-277.082353-278.420915-9.369935-45.511112-100.392157-66.928104-22.755555 22.755555 68.266666 100.392157z" fill="#2A5082" /><path d="M576.920261 673.296732l95.037909-95.037908 46.849673 9.369934v56.219608L870.065359 795.105882c16.062745 16.062745 16.062745 41.495425 0 56.219608L851.32549 870.065359c-16.062745 16.062745-41.495425 16.062745-56.219608 0L643.848366 720.146405h-56.219608l-10.708497-46.849673z" fill="#A3D4FF" /><path d="M823.215686 896.836601c-14.724183 0-28.109804-5.354248-37.479738-16.062745l-147.24183-147.24183h-61.573857l-2.677124-10.708497c-10.708497-53.542484-10.708497-53.542484-5.354248-58.896732l95.037908-95.037908c5.354248-5.354248 5.354248-5.354248 58.896732 5.354248l10.708497 2.677124v61.573857l147.24183 147.24183c10.708497 10.708497 16.062745 24.094118 16.062745 37.479738 0 14.724183-5.354248 28.109804-16.062745 37.479739l-18.739869 18.739869c-10.708497 12.047059-24.094118 17.401307-38.818301 17.401307zM607.70719 706.760784c41.495425 0 41.495425 0 45.511111 4.015687l151.257516 151.257516c10.708497 10.708497 28.109804 10.708497 37.479739 0l18.739869-18.739869c5.354248-5.354248 8.031373-12.047059 8.031372-18.73987s-2.677124-13.385621-8.031372-18.739869L709.437908 654.556863c-4.015686-4.015686-4.015686-4.015686-4.015686-54.881046-10.708497-2.677124-22.755556-4.015686-29.448366-5.354248l-84.329412 84.329411c1.338562 6.69281 4.015686 18.739869 5.354249 29.448366 4.015686-1.338562 8.031373-1.338562 10.708497-1.338562z" fill="#2A5082" /><path d="M662.333908 682.760366l18.927268-18.927268 160.895164 160.895163-18.913882 18.940654z" fill="#2A5082" /></svg>
		</button>
		<div v-show="visible" class="settings">
			<div>
				<label>
					<span>httpUrl</span>
					<input v-model="httpUrl" type="text" placeholder="">
				</label>
				<label>
					<span>httpPort</span>
					<input v-model="httpPort" type="text" placeholder="">
				</label>
			</div>
			<div>
				<label>
					<span>websocketUrl</span>
					<input v-model="websocketUrl" type="text" placeholder="">
				</label>
				<label>
					<span>websocketPort</span>
					<input v-model="websocketPort" type="text" placeholder="">
				</label>
			</div>
			<div class="confirm">
				<button ref="confirm">确定</button>
			</div>
		</div>
	</div>
</template>

<script>
export default {
	name: "Settings",
	data() {
		return {
			httpUrl: window.localStorage.getItem('httpUrl') || '127.0.0.1',
			httpPort: window.localStorage.getItem('httpPort') || 8000,
			websocketUrl: window.localStorage.getItem('websocketUrl') || '127.0.0.1',
			websocketPort: window.localStorage.getItem('websocketPort') || '8000',
			visible: false,
		}
	},
	mounted() {
		this.$refs.btn.addEventListener('click', () => {
			if (!this.visible) {
				this.visible = true;
			}
		}, false)
		this.$refs.confirm.addEventListener('click', () => {
			window.localStorage.setItem('httpUrl', this.httpUrl);
			window.localStorage.setItem('httpPort', this.httpPort);
			window.localStorage.setItem('websocketUrl', this.websocketUrl);
			window.localStorage.setItem('websocketPort', this.websocketPort);
			this.visible = false;
		})
	}
}
</script>

<style scoped>
.settings-btn {
	background: transparent;
	position: absolute;
	right: 0;
	top: 0;
	outline: none;
	border: 0;
	opacity: 0.5;
}

.settings-btn:hover {
	opacity: 1;
}

.settings {
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -50%);
	background: #ffffff;
	width: 600px;
	height: 144px;
	display: flex;
	flex-direction: column;
	justify-content: center;
}

.settings > div {
	display: flex;
	padding: 0.5rem;
	width: 100%;
	box-sizing: border-box;
}

.settings label {
	display: flex;
	justify-content: space-between;
	align-items: center;
	width: 50%;
	padding: 0 0.5rem;
	box-sizing: border-box;
}

.settings label input {
	padding: 0.25rem;
}

.confirm {
	display: flex;
	justify-content: center;
}

.confirm button {
	background: #4CACED;
	border: none;
	padding: 0.25rem 0.5rem;
	cursor: pointer;
}

.confirm button:active {
	background: #1AA3FF;
}
</style>