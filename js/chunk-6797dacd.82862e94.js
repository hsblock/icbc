(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6797dacd"],{"14c3":function(t,e,n){var o=n("c6b6"),a=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var s=n.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==o(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"159b":function(t,e,n){var o=n("da84"),a=n("fdbc"),s=n("17c2"),r=n("9112");for(var i in a){var c=o[i],l=c&&c.prototype;if(l&&l.forEach!==s)try{r(l,"forEach",s)}catch(u){l.forEach=s}}},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,a=n("a640"),s=n("ae40"),r=a("forEach"),i=s("forEach");t.exports=r&&i?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"3da2":function(t,e,n){"use strict";n("9d5a")},"3dd8":function(t,e,n){"use strict";n("865f")},4160:function(t,e,n){"use strict";var o=n("23e7"),a=n("17c2");o({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"45f3":function(t,e,n){},"466d":function(t,e,n){"use strict";var o=n("d784"),a=n("825a"),s=n("50c4"),r=n("1d80"),i=n("8aa5"),c=n("14c3");o("match",1,(function(t,e,n){return[function(e){var n=r(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n):new RegExp(e)[t](String(n))},function(t){var o=n(e,t,this);if(o.done)return o.value;var r=a(t),l=String(this);if(!r.global)return c(r,l);var u=r.unicode;r.lastIndex=0;var f,d=[],h=0;while(null!==(f=c(r,l))){var g=String(f[0]);d[h]=g,""===g&&(r.lastIndex=i(l,s(r.lastIndex),u)),h++}return 0===h?null:d}]}))},"46fa":function(t,e,n){},5085:function(t,e,n){},"865f":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var o=n("6547").charAt;t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},"90b8":function(t,e,n){},9263:function(t,e,n){"use strict";var o=n("ad6d"),a=n("9f7f"),s=RegExp.prototype.exec,r=String.prototype.replace,i=s,c=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=c||u||l;f&&(i=function(t){var e,n,a,i,f=this,d=l&&f.sticky,h=o.call(f),g=f.source,p=0,m=t;return d&&(h=h.replace("y",""),-1===h.indexOf("g")&&(h+="g"),m=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(g="(?: "+g+")",m=" "+m,p++),n=new RegExp("^(?:"+g+")",h)),u&&(n=new RegExp("^"+g+"$(?!\\s)",h)),c&&(e=f.lastIndex),a=s.call(d?n:f,m),d?a?(a.input=a.input.slice(p),a[0]=a[0].slice(p),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:c&&a&&(f.lastIndex=f.global?a.index+a[0].length:e),u&&a&&a.length>1&&r.call(a[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a}),t.exports=i},9538:function(t,e,n){"use strict";n("90b8")},"989e":function(t,e,n){},"98fb":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"left"},[n("Video"),n("AreaData")],1),n("div",{staticClass:"right"},[n("People"),n("PassFlowStat"),n("PassFlowStru"),n("FaceDetection")],1)])},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"face-detection-container"},[n("h2",[t._v("访客人脸识别")]),n("transition-group",{attrs:{name:"faces",tag:"p"}},t._l(t.infos,(function(e,o){return n("div",{key:o,staticClass:"face-detection-item"},[n("img",{staticClass:"face",attrs:{src:e.img,alt:""}}),n("div",[t._v(" "+t._s(e.gender)+" "+t._s(e.age)+" ")])])})),0)],1)},r=[],i=(n("4160"),n("a434"),n("159b"),n("a1bc")),c={name:"FaceDetection",data:function(){return{infos:[],ws:null}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.ws&&this.ws.close(1e3,"face attr destroy")},methods:{openWebSocket:function(){var t=this;this.ws=new WebSocket(Object(i["a"])().ws.faceAttr),this.ws.onopen=function(){return console.log("face attr open")},this.ws.onmessage=function(e){var n=JSON.parse(e.data)["infos"];console.log(n),t.infos.splice(0,t.infos.length),n.forEach((function(e){t.infos.splice(t.infos.length,0,{img:"data:image/png;base64,"+e["img"],gender:e["gender"],age:e["age"]})}))},this.ws.onerror=function(t){return console.log(t)},this.ws.onclose=function(){return console.log("face attr close")}}}},l=c,u=(n("3dd8"),n("2877")),f=Object(u["a"])(l,s,r,!1,null,"7a9d60c7",null),d=f.exports,h=n("d1a6"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area-datas-container"},[n("h2",[t._v("区域统计数据")]),n("div",{staticClass:"area-datas-wrapper"},[n("div",{staticClass:"area-datas-items"},[n("h4",[t._v("自助区域")]),n("span",[t._v("当前排队人数: "+t._s(t.self.num))]),n("span",[t._v("最长停留时间: "+t._s(t.self.maxSTime)+"分钟")]),n("span",[t._v("最长接触时间: "+t._s(t.self.maxATime)+"分钟")])]),n("div",{staticClass:"area-datas-items"},[n("h4",[t._v("安防区域")]),n("span",[t._v("可疑危险物品: "+t._s(t.safe.danger))]),n("span",[t._v("检测遗留物品: "+t._s(t.safe.lost))])]),n("div",{staticClass:"area-datas-items"},[n("h4",[t._v("迎宾区域")]),n("span",[t._v("值班员工: "+t._s(t.manager.staff))]),n("span",[t._v("最近离岗时长: "+t._s(t.manager.status))])])])])},p=[],m=(n("b0c0"),{name:"AreaData",data:function(){return{safe:{danger:"手枪",lost:"手机"},self:{num:10,maxSTime:10,maxATime:"未实现"},manager:{staff:"张三",status:"在岗/暂离/离岗"},wsNumQueue:null,wsMostStaningTime:null,wsAbnormal:null,wsLeftover:null,wsManagerStatus:null}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.closeWebSocket()},methods:{openWebSocket:function(){this.openAbnormal(1e3,"abnormal close"),this.openLeftover(1e3,"leftover close"),this.openManagerStatus(1e3,"manager status close"),this.openMostStaningTime(1e3,"most staning time close"),this.openNumQueue(1e3,"num queue close")},closeWebSocket:function(){this.wsNumQueue&&this.wsNumQueue.close(1e3,"num queue destroy"),this.wsMostStaningTime&&this.wsMostStaningTime.close(1e3,"most staning time destroy"),this.wsAbnormal&&this.wsAbnormal.close(1e3,"abnormal destroy"),this.wsLeftover&&this.wsLeftover.close(1e3,"leftover destroy"),this.wsManagerStatus&&this.wsManagerStatus.close(1e3,"manager status destroy")},openNumQueue:function(){var t=this;this.wsNumQueue=new WebSocket(Object(i["a"])().ws.numQueue),this.wsNumQueue.onopen=function(){return console.log("num queue open")},this.wsNumQueue.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.self.num=n["numberOfQueue"]},this.wsNumQueue.onerror=function(t){return console.log(t)},this.wsNumQueue.onclose=function(){return console.log("num queue close")}},openMostStaningTime:function(){var t=this;this.wsMostStaningTime=new WebSocket(Object(i["a"])().ws.mostStaningTime),this.wsMostStaningTime.onopen=function(){return console.log("most staning time open")},this.wsMostStaningTime.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.self.maxSTime=n["mostStaningTime"]},this.wsMostStaningTime.onerror=function(t){return console.log(t)},this.wsMostStaningTime.onclose=function(){return console.log("most staning time close")}},openAbnormal:function(){var t=this;this.wsAbnormal=new WebSocket(Object(i["a"])().ws.abnormal),this.wsAbnormal.onopen=function(){return console.log("abnormal open")},this.wsAbnormal.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.safe.danger=n["name"]},this.wsAbnormal.onerror=function(t){return console.log(t)},this.wsAbnormal.onclose=function(){return console.log("abnormal close")}},openLeftover:function(){var t=this;this.wsLeftover=new WebSocket(Object(i["a"])().ws.leftover),this.wsLeftover.onopen=function(){return console.log("leftover open")},this.wsLeftover.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.safe.lost=n["name"]},this.wsLeftover.onerror=function(t){return console.log(t)},this.wsLeftover.onclose=function(){return console.log("leftover close")}},openManagerStatus:function(){var t=this;this.wsManagerStatus=new WebSocket(Object(i["a"])().ws.managerStatus),this.wsManagerStatus.onopen=function(){return console.log("manager status open")},this.wsManagerStatus.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.manager.status=n["status"]},this.wsManagerStatus.onerror=function(t){return console.log(t)},this.wsManagerStatus.onclose=function(){return console.log("manager status close")}}}}),v=m,w=(n("e99f"),Object(u["a"])(v,g,p,!1,null,"56348490",null)),b=w.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"people-container"},[n("div",[t._v(" 当前驻留人次: "+t._s(t.currentStay)+" 今日客流总量: "+t._s(t.todayFlow)+" 客流上限: "+t._s(t.flowLimit)+" ")])])},x=[],_={name:"People",data:function(){return{currentStay:"未实现",todayFlow:"未实现",flowLimit:"未实现"}}},y=_,C=(n("cbe8"),Object(u["a"])(y,S,x,!1,null,"a7828b6c",null)),E=C.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-flow-stat-container"},[n("h2",{staticClass:"title"},[t._v(" 客流统计信息 ")]),n("div",{staticClass:"pass-flow-stat-wrapper"},[n("TodayFlow"),n("SevenDayFlow")],1)])},D=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LineChart",{staticClass:"today-flow",attrs:{"chart-data":t.chartData,options:t.options}})},O=[],F=(n("a630"),n("d81d"),n("3ca3"),n("6636")),T={name:"TodayFlow",components:{LineChart:F["a"]},data:function(){return{chartData:{labels:Array.from({length:9}).map((function(t,e){return 9+e})),datasets:[{label:"当天客流",fill:!1,backgroundColor:"#000",borderColor:"#000",data:Array.from({length:6}).map((function(t,e){return Math.round(10*Math.random())}))}]},options:{responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.ws&&this.ws.close(1e3,"latest day destroy")},methods:{openWebSocket:function(){var t=this;this.ws=new WebSocket(Object(i["a"])().ws.latestDay),this.ws.onopen=function(){return console.log("latest day open")},this.ws.onmessage=function(e){console.log(e.data),t.chartData.datasets[0].data=JSON.parse(e.data)["population"]},this.ws.onerror=function(t){return console.log(t)},this.ws.onclose=function(){return console.log("latest day close")}}}},M=T,R=Object(u["a"])(M,k,O,!1,null,"8ebc56d2",null),j=R.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LineChart",{staticClass:"seven-day-flow",attrs:{"chart-data":t.chartData,options:t.options}})},P=[],W=(n("a15b"),n("ac1f"),n("466d"),{name:"SevenDayFlow",components:{LineChart:F["a"]},data:function(){return{chartData:{labels:Array.from({length:7}).map((function(t,e){var n=new Date,o=n.getFullYear(),a=n.getMonth(),s=n.getDate(),r=new Date(o,a,s-e-1).toLocaleDateString(),i=r.match(/([0-9]+)/g);return i.splice(0,1),i.join("/")})).reverse(),datasets:[{label:"未实现",fill:!1,backgroundColor:"#000",borderColor:"#000",data:Array.from({length:7}).map((function(t,e){return Math.round(100*Math.random())}))}]},options:{responsive:!0,maintainAspectRatio:!1}}}}),L=W,I=Object(u["a"])(L,N,P,!1,null,"3c5f8da1",null),$=I.exports,Q={name:"PassFlowStat",components:{SevenDayFlow:$,TodayFlow:j}},G=Q,J=(n("9538"),Object(u["a"])(G,A,D,!1,null,"63d593e0",null)),U=J.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-flow-stru-container"},[n("h2",{staticClass:"title"},[t._v(" 客流人员结构 ")]),n("div",{staticClass:"pass-flow-stru-wrapper"},[n("PassAttr")],1)])},q=[],K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-attr"},[t._m(0),n("PieChart",{staticClass:"gender-distribution",attrs:{"chart-data":t.chartData,options:t.options}})],1)},Y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"labels"},[n("table",[n("tr",[n("td",{staticStyle:{background:"#4CACED"}}),n("td",[t._v("男性")])]),n("tr",[n("td",{staticStyle:{background:"#FF6384"}}),n("td",[t._v("女性")])])]),n("table",[n("tr",[n("td",{staticStyle:{background:"#ff9f40"}}),n("td",[t._v("18岁以下")])]),n("tr",[n("td",{staticStyle:{background:"#FFCD56"}}),n("td",[t._v("18-30岁")])]),n("tr",[n("td",{staticStyle:{background:"#4BC0C0"}}),n("td",[t._v("30-60岁")])]),n("tr",[n("td",{staticStyle:{background:"#9966FF"}}),n("td",[t._v("60岁以上")])])])])}],V=n("1fca"),X=n("81b0"),z={extends:V["b"],props:["chartData","options"],mounted:function(){this.renderChart(X.cloneDeep(this.chartData),this.options)},watch:{chartData:{handler:function(){console.log("change"),this.renderChart(X.cloneDeep(this.chartData),this.options)},deep:!0}}},H={name:"PassAttr",components:{PieChart:z},data:function(){return{chartData:{labels:[],datasets:[{label:"性别分布",backgroundColor:["#4CACED","#FF6384"],borderColor:"#ffffff",data:[10,20]},{label:"年龄分布",backgroundColor:["#ff9f40","#FFCD56","#4BC0C0","#9966FF"],borderColor:"#ffffff",data:[70,20,40,50]}]},options:{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:2,legend:{display:!1},tooltips:{enabled:!1}},wsGender:null,wsAge:null}},created:function(){this.openWebSocket()},beforeDestroy:function(){this.closeWebSocket()},methods:{openWebSocket:function(){this.openGender(),this.openAge()},closeWebSocket:function(){this.wsAge&&this.wsAge.close(1e3,"age rate destroy"),this.wsGender&&this.wsGender.close(1e3,"gender rate destroy")},openGender:function(){var t=this;this.wsGender=new WebSocket(Object(i["a"])().ws.genderRate),this.wsGender.onopen=function(){return console.log("gender rate open")},this.wsGender.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.chartData.datasets[0].data=[+n["男"],+n["女"]]},this.wsGender.onerror=function(t){return console.log(t)},this.wsGender.onclose=function(){return console.log("gender rate close")}},openAge:function(){var t=this;this.wsAge=new WebSocket(Object(i["a"])().ws.ageRate),this.wsAge.onopen=function(){return console.log("age rate open")},this.wsAge.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.chartData.datasets[1].data=n["age"].map((function(t){return+t}))},this.wsAge.onerror=function(t){return console.log(t)},this.wsAge.onclose=function(){return console.log("age rate close")}}}},Z=H,tt=(n("b9d2"),Object(u["a"])(Z,K,Y,!1,null,"4339aa0a",null)),et=tt.exports,nt={name:"PassFlowStru",components:{PassAttr:et}},ot=nt,at=(n("d33f"),Object(u["a"])(ot,B,q,!1,null,"e720b4e6",null)),st=at.exports,rt={name:"Main",components:{PassFlowStru:st,PassFlowStat:U,People:E,AreaData:b,Video:h["a"],FaceDetection:d}},it=rt,ct=(n("3da2"),Object(u["a"])(it,o,a,!1,null,"28d6f71a",null));e["default"]=ct.exports},"9d5a":function(t,e,n){},"9f7f":function(t,e,n){"use strict";var o=n("d039");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=o((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=o((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,n){"use strict";var o=n("23e7"),a=n("44ad"),s=n("fc6a"),r=n("a640"),i=[].join,c=a!=Object,l=r("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(s(this),void 0===t?",":t)}})},a434:function(t,e,n){"use strict";var o=n("23e7"),a=n("23cb"),s=n("a691"),r=n("50c4"),i=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),f=n("ae40"),d=u("splice"),h=f("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,p=Math.min,m=9007199254740991,v="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!h},{splice:function(t,e){var n,o,u,f,d,h,w=i(this),b=r(w.length),S=a(t,b),x=arguments.length;if(0===x?n=o=0:1===x?(n=0,o=b-S):(n=x-2,o=p(g(s(e),0),b-S)),b+n-o>m)throw TypeError(v);for(u=c(w,o),f=0;f<o;f++)d=S+f,d in w&&l(u,f,w[d]);if(u.length=o,n<o){for(f=S;f<b-o;f++)d=f+o,h=f+n,d in w?w[h]=w[d]:delete w[h];for(f=b;f>b-o+n;f--)delete w[f-1]}else if(n>o)for(f=b-o;f>S;f--)d=f+o-1,h=f+n-1,d in w?w[h]=w[d]:delete w[h];for(f=0;f<n;f++)w[f+S]=arguments[f+2];return w.length=b-o+n,u}})},a640:function(t,e,n){"use strict";var o=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))}},ac1f:function(t,e,n){"use strict";var o=n("23e7"),a=n("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,n){"use strict";var o=n("825a");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,n){var o=n("83ab"),a=n("9bf2").f,s=Function.prototype,r=s.toString,i=/^\s*function ([^ (]*)/,c="name";o&&!(c in s)&&a(s,c,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(t){return""}}})},b9d2:function(t,e,n){"use strict";n("989e")},cbe8:function(t,e,n){"use strict";n("5085")},d33f:function(t,e,n){"use strict";n("46fa")},d784:function(t,e,n){"use strict";n("ac1f");var o=n("6eeb"),a=n("d039"),s=n("b622"),r=n("9263"),i=n("9112"),c=s("species"),l=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=s("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),h=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var g=s(t),p=!a((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),m=p&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!p||!m||"replace"===t&&(!l||!u||d)||"split"===t&&!h){var v=/./[g],w=n(g,""[t],(function(t,e,n,o,a){return e.exec===r?p&&!a?{done:!0,value:v.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=w[0],S=w[1];o(String.prototype,t,b),o(RegExp.prototype,g,2==e?function(t,e){return S.call(t,this,e)}:function(t){return S.call(t,this)})}f&&i(RegExp.prototype[g],"sham",!0)}},e99f:function(t,e,n){"use strict";n("45f3")}}]);
//# sourceMappingURL=chunk-6797dacd.82862e94.js.map