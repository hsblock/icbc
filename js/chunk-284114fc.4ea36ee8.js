(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-284114fc"],{"013b":function(t,e,n){},"14c3":function(t,e,n){var o=n("c6b6"),a=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var s=n.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==o(t))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"2dff":function(t,e,n){"use strict";n("4895")},"3da2":function(t,e,n){"use strict";n("9d5a")},"466d":function(t,e,n){"use strict";var o=n("d784"),a=n("825a"),s=n("50c4"),r=n("1d80"),i=n("8aa5"),c=n("14c3");o("match",1,(function(t,e,n){return[function(e){var n=r(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n):new RegExp(e)[t](String(n))},function(t){var o=n(e,t,this);if(o.done)return o.value;var r=a(t),l=String(this);if(!r.global)return c(r,l);var u=r.unicode;r.lastIndex=0;var f,d=[],p=0;while(null!==(f=c(r,l))){var g=String(f[0]);d[p]=g,""===g&&(r.lastIndex=i(l,s(r.lastIndex),u)),p++}return 0===p?null:d}]}))},4895:function(t,e,n){},"48b7":function(t,e,n){"use strict";n("eb84")},"4b14":function(t,e,n){"use strict";n("d056")},"6d74":function(t,e,n){"use strict";n("f1d7")},"8aa5":function(t,e,n){"use strict";var o=n("6547").charAt;t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},9263:function(t,e,n){"use strict";var o=n("ad6d"),a=n("9f7f"),s=RegExp.prototype.exec,r=String.prototype.replace,i=s,c=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=c||u||l;f&&(i=function(t){var e,n,a,i,f=this,d=l&&f.sticky,p=o.call(f),g=f.source,h=0,m=t;return d&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),m=String(t).slice(f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==t[f.lastIndex-1])&&(g="(?: "+g+")",m=" "+m,h++),n=new RegExp("^(?:"+g+")",p)),u&&(n=new RegExp("^"+g+"$(?!\\s)",p)),c&&(e=f.lastIndex),a=s.call(d?n:f,m),d?a?(a.input=a.input.slice(h),a[0]=a[0].slice(h),a.index=f.lastIndex,f.lastIndex+=a[0].length):f.lastIndex=0:c&&a&&(f.lastIndex=f.global?a.index+a[0].length:e),u&&a&&a.length>1&&r.call(a[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(a[i]=void 0)})),a}),t.exports=i},"989e":function(t,e,n){},"98fb":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"left"},[n("Video"),n("AreaData")],1),n("div",{staticClass:"right"},[n("People"),n("PassFlowStat"),n("PassFlowStru"),n("FaceDetection")],1)])},a=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"face-detection-container"},[n("h2",[t._v("访客人脸识别")]),n("transition-group",{attrs:{name:"faces",tag:"div",appear:"",duration:"500"}},t._l(t.infos,(function(e){return n("div",{key:e.key,staticClass:"face-detection-item"},[n("img",{staticClass:"face",attrs:{src:e.img,alt:""}}),n("div",[n("div",[t._v("性别: "+t._s(e.gender))]),n("div",[t._v("年龄: "+t._s(e.age))])])])})),0)],1)},r=[],i=(n("a434"),n("a1bc")),c={name:"FaceDetection",data:function(){return{infos:[{img:"data:image/png;base64,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",gender:"男",age:18,key:0}],key:0,ws:null}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.ws&&this.ws.close(1e3,"face attr destroy")},methods:{openWebSocket:function(){var t=this;this.ws=new WebSocket(Object(i["a"])().ws.faceAttr),this.ws.onopen=function(){return console.log("face attr open")},this.ws.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.infos.length>=6&&t.infos.splice(0,t.infos.length-5),t.infos.push({img:"data:image/png;base64,"+n["img"],gender:n["gender"],age:n["age"],key:t.key++})},this.ws.onerror=function(t){return console.log(t)},this.ws.onclose=function(){return console.log("face attr close")}}}},l=c,u=(n("999d"),n("2877")),f=Object(u["a"])(l,s,r,!1,null,"c1ae2616",null),d=f.exports,p=n("d1a6"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area-data-container"},[n("h2",[t._v("区域统计数据")]),n("div",{staticClass:"area-data-wrapper"},[n("div",{staticClass:"area-data-items"},[n("h4",[t._v("自助区域")]),n("span",[t._v("当前排队人数: "+t._s(t.self.num))]),n("span",[t._v("最长停留时间: "+t._s(t.self.maxSTime)+"分钟")]),n("span",[t._v("最长接触时间: "+t._s(t.self.maxCTime)+"分钟")])]),n("div",{staticClass:"area-data-items"},[n("h4",[t._v("安防区域")]),n("span",[t._v("可疑危险物品: "+t._s(t.safe.danger))]),n("span",[t._v("检测遗留物品: "+t._s(t.safe.lost))])]),n("div",{staticClass:"area-data-items"},[n("h4",[t._v("迎宾区域")]),n("span",[t._v("值班员工: "+t._s(t.manager.staff))]),n("span",[t._v("最近离岗时长: "+t._s(t.manager.status))])])])])},h=[],m=(n("b0c0"),{name:"AreaData",data:function(){return{safe:{danger:"手枪",lost:"手机"},self:{num:10,maxSTime:10,maxCTime:"无"},manager:{staff:"张三",status:"..."},wsNumQueue:null,wsMostStaningTime:null,wsAbnormal:null,wsLeftover:null,wsManagerStatus:null,wsMostContactTime:null}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.closeWebSocket()},methods:{openWebSocket:function(){this.openAbnormal(),this.openLeftover(),this.openManagerStatus(),this.openMostStaningTime(),this.openNumQueue(),this.openMostContactTime()},closeWebSocket:function(){this.wsNumQueue&&this.wsNumQueue.close(1e3,"num queue destroy"),this.wsMostStaningTime&&this.wsMostStaningTime.close(1e3,"most staning time destroy"),this.wsAbnormal&&this.wsAbnormal.close(1e3,"abnormal destroy"),this.wsLeftover&&this.wsLeftover.close(1e3,"leftover destroy"),this.wsManagerStatus&&this.wsManagerStatus.close(1e3,"manager status destroy"),this.wsMostContactTime&&this.wsMostContactTime.close(1e3,"most contact time destroy")},openNumQueue:function(){var t=this;this.wsNumQueue=new WebSocket(Object(i["a"])().ws.numQueue),this.wsNumQueue.onopen=function(){return console.log("num queue open")},this.wsNumQueue.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.self.num=n["numberOfQueue"]},this.wsNumQueue.onerror=function(t){return console.log(t)},this.wsNumQueue.onclose=function(){return console.log("num queue close")}},openMostStaningTime:function(){var t=this;this.wsMostStaningTime=new WebSocket(Object(i["a"])().ws.mostStaningTime),this.wsMostStaningTime.onopen=function(){return console.log("most staning time open")},this.wsMostStaningTime.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.self.maxSTime=n["mostStaningTime"]},this.wsMostStaningTime.onerror=function(t){return console.log(t)},this.wsMostStaningTime.onclose=function(){return console.log("most staning time close")}},openAbnormal:function(){var t=this;this.wsAbnormal=new WebSocket(Object(i["a"])().ws.abnormal),this.wsAbnormal.onopen=function(){return console.log("abnormal open")},this.wsAbnormal.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.safe.danger=n["name"]},this.wsAbnormal.onerror=function(t){return console.log(t)},this.wsAbnormal.onclose=function(){return console.log("abnormal close")}},openLeftover:function(){var t=this;this.wsLeftover=new WebSocket(Object(i["a"])().ws.leftover),this.wsLeftover.onopen=function(){return console.log("leftover open")},this.wsLeftover.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.safe.lost=n["name"]},this.wsLeftover.onerror=function(t){return console.log(t)},this.wsLeftover.onclose=function(){return console.log("leftover close")}},openManagerStatus:function(){var t=this;this.wsManagerStatus=new WebSocket(Object(i["a"])().ws.managerStatus),this.wsManagerStatus.onopen=function(){return console.log("manager status open")},this.wsManagerStatus.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.manager.status=n["status"]},this.wsManagerStatus.onerror=function(t){return console.log(t)},this.wsManagerStatus.onclose=function(){return console.log("manager status close")}},openMostContactTime:function(){var t=this;this.wsMostContactTime=new WebSocket(Object(i["a"])().ws.mostContactTime),this.wsMostContactTime.onopen=function(){return console.log("most contact time open")},this.wsMostContactTime.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.self.maxCTime=n["mostContactTime"]},this.wsMostContactTime.onerror=function(t){return console.log(t)},this.wsMostContactTime.onclose=function(){return console.log("most contact time close")}}}}),w=m,v=(n("4b14"),Object(u["a"])(w,g,h,!1,null,"8414ff1a",null)),b=v.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"people-container"},[n("span",{staticClass:"people"},[t._v("当前驻留人次: "+t._s(t.currentStay))]),n("span",{staticClass:"people"},[t._v("今日客流总量: "+t._s(t.todayFlow))]),n("span",{staticClass:"people"},[t._v("客流上限:")]),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.submitEntrySize(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.flowLimit,expression:"flowLimit"}],attrs:{type:"text"},domProps:{value:t.flowLimit},on:{input:function(e){e.target.composing||(t.flowLimit=e.target.value)}}})])])},C=[],y={name:"People",data:function(){return{currentStay:"无",todayFlow:"无",flowLimit:""}},mounted:function(){this.getEntrySize()},methods:{submitEntrySize:function(){var t=this;this.axios.get(Object(i["a"])().http.setEntrySize,{params:{entrySize:this.flowLimit}}).then((function(e){console.log(e),t.$message.success("客流上限已经成功被设置为"+t.flowLimit)})).catch((function(e){console.log(e),t.$message.error("客流上限设置失败")}))},getEntrySize:function(){var t=this;this.axios.get(Object(i["a"])().http.getEntrySize).then((function(e){var n=e.data;t.flowLimit=n["entrySize"]})).catch((function(t){console.log(t)}))}}},A=y,x=(n("6d74"),Object(u["a"])(A,S,C,!1,null,"3d8092c8",null)),L=x.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-flow-stat-container"},[n("h2",{staticClass:"title"},[t._v(" 客流统计信息 ")]),n("div",{staticClass:"pass-flow-stat-wrapper"},[n("TodayFlow"),n("SevenDayFlow")],1)])},M=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LineChart",{staticClass:"today-flow",attrs:{"chart-data":t.chartData,options:t.options}})},E=[],O=(n("a630"),n("d81d"),n("3ca3"),n("6636")),T={name:"TodayFlow",components:{LineChart:O["a"]},data:function(){return{chartData:{labels:Array.from({length:9}).map((function(t,e){return 9+e})),datasets:[{label:"当天客流",fill:!1,backgroundColor:"#000",borderColor:"#000",data:Array.from({length:6}).map((function(t,e){return Math.round(10*Math.random())}))}]},options:{responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.openWebSocket()},beforeDestroy:function(){this.ws&&this.ws.close(1e3,"latest day destroy")},methods:{openWebSocket:function(){var t=this;this.ws=new WebSocket(Object(i["a"])().ws.latestDay),this.ws.onopen=function(){return console.log("latest day open")},this.ws.onmessage=function(e){console.log(e.data),t.chartData.datasets[0].data=JSON.parse(e.data)["population"]},this.ws.onerror=function(t){return console.log(t)},this.ws.onclose=function(){return console.log("latest day close")}}}},P=T,j=Object(u["a"])(P,k,E,!1,null,"8ebc56d2",null),F=j.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("LineChart",{staticClass:"seven-day-flow",attrs:{"chart-data":t.chartData,options:t.options}})},z=[],I=(n("a15b"),n("ac1f"),n("466d"),{name:"SevenDayFlow",components:{LineChart:O["a"]},data:function(){return{chartData:{labels:Array.from({length:7}).map((function(t,e){var n=new Date,o=n.getFullYear(),a=n.getMonth(),s=n.getDate(),r=new Date(o,a,s-e-1).toLocaleDateString(),i=r.match(/([0-9]+)/g);return i.splice(0,1),i.join("/")})).reverse(),datasets:[{label:"历史七天客流",fill:!1,backgroundColor:"#000",borderColor:"#000",data:Array.from({length:7}).map((function(t,e){return Math.round(100*Math.random())}))}]},options:{responsive:!0,maintainAspectRatio:!1}}},mounted:function(){this.getLastWeekNum()},methods:{getLastWeekNum:function(){var t=this;this.axios.get(Object(i["a"])().http.getLastWeekNum).then((function(e){var n=e.data;console.log(n),t.chartData.datasets[0].data=n["lastWeekNum"]})).catch((function(t){return console.log(t)}))}}}),J=I,R=Object(u["a"])(J,N,z,!1,null,"4d24533a",null),W=R.exports,K={name:"PassFlowStat",components:{SevenDayFlow:W,TodayFlow:F}},q=K,X=(n("48b7"),Object(u["a"])(q,D,M,!1,null,"79e99d50",null)),Q=X.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-flow-stru-container"},[n("h2",{staticClass:"title"},[t._v(" 客流人员结构 ")]),n("div",{staticClass:"pass-flow-stru-wrapper"},[n("PassAttr")],1)])},B=[],H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pass-attr"},[t._m(0),n("PieChart",{staticClass:"gender-distribution",attrs:{"chart-data":t.chartData,options:t.options}})],1)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"labels"},[n("table",[n("tr",[n("td",{staticStyle:{background:"#4CACED"}}),n("td",[t._v("男性")])]),n("tr",[n("td",{staticStyle:{background:"#FF6384"}}),n("td",[t._v("女性")])])]),n("table",[n("tr",[n("td",{staticStyle:{background:"#ff9f40"}}),n("td",[t._v("18岁以下")])]),n("tr",[n("td",{staticStyle:{background:"#FFCD56"}}),n("td",[t._v("18-30岁")])]),n("tr",[n("td",{staticStyle:{background:"#4BC0C0"}}),n("td",[t._v("30-60岁")])]),n("tr",[n("td",{staticStyle:{background:"#9966FF"}}),n("td",[t._v("60岁以上")])])])])}],G=n("1fca"),Y=n("81b0"),U={extends:G["b"],props:["chartData","options"],mounted:function(){this.renderChart(Y.cloneDeep(this.chartData),this.options)},watch:{chartData:{handler:function(){console.log("change"),this.renderChart(Y.cloneDeep(this.chartData),this.options)},deep:!0}}},Z={name:"PassAttr",components:{PieChart:U},data:function(){return{chartData:{labels:[],datasets:[{label:"性别分布",backgroundColor:["#4CACED","#FF6384"],borderColor:"#ffffff",data:[10,20]},{label:"年龄分布",backgroundColor:["#ff9f40","#FFCD56","#4BC0C0","#9966FF"],borderColor:"#ffffff",data:[70,20,40,50]}]},options:{responsive:!0,maintainAspectRatio:!1,devicePixelRatio:2,legend:{display:!1},tooltips:{enabled:!1}},wsGender:null,wsAge:null}},created:function(){this.openWebSocket()},beforeDestroy:function(){this.closeWebSocket()},methods:{openWebSocket:function(){this.openGender(),this.openAge()},closeWebSocket:function(){this.wsAge&&this.wsAge.close(1e3,"age rate destroy"),this.wsGender&&this.wsGender.close(1e3,"gender rate destroy")},openGender:function(){var t=this;this.wsGender=new WebSocket(Object(i["a"])().ws.genderRate),this.wsGender.onopen=function(){return console.log("gender rate open")},this.wsGender.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.chartData.datasets[0].data=[+n["男"],+n["女"]]},this.wsGender.onerror=function(t){return console.log(t)},this.wsGender.onclose=function(){return console.log("gender rate close")}},openAge:function(){var t=this;this.wsAge=new WebSocket(Object(i["a"])().ws.ageRate),this.wsAge.onopen=function(){return console.log("age rate open")},this.wsAge.onmessage=function(e){var n=JSON.parse(e.data);console.log(n),t.chartData.datasets[1].data=n["age"].map((function(t){return+t}))},this.wsAge.onerror=function(t){return console.log(t)},this.wsAge.onclose=function(){return console.log("age rate close")}}}},$=Z,tt=(n("b9d2"),Object(u["a"])($,H,_,!1,null,"4339aa0a",null)),et=tt.exports,nt={name:"PassFlowStru",components:{PassAttr:et}},ot=nt,at=(n("2dff"),Object(u["a"])(ot,V,B,!1,null,"0275cccd",null)),st=at.exports,rt={name:"Main",components:{PassFlowStru:st,PassFlowStat:Q,People:L,AreaData:b,Video:p["a"],FaceDetection:d}},it=rt,ct=(n("3da2"),Object(u["a"])(it,o,a,!1,null,"28d6f71a",null));e["default"]=ct.exports},"999d":function(t,e,n){"use strict";n("013b")},"9d5a":function(t,e,n){},"9f7f":function(t,e,n){"use strict";var o=n("d039");function a(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=o((function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=o((function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a15b:function(t,e,n){"use strict";var o=n("23e7"),a=n("44ad"),s=n("fc6a"),r=n("a640"),i=[].join,c=a!=Object,l=r("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return i.call(s(this),void 0===t?",":t)}})},ac1f:function(t,e,n){"use strict";var o=n("23e7"),a=n("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},ad6d:function(t,e,n){"use strict";var o=n("825a");t.exports=function(){var t=o(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b9d2:function(t,e,n){"use strict";n("989e")},d056:function(t,e,n){},d784:function(t,e,n){"use strict";n("ac1f");var o=n("6eeb"),a=n("d039"),s=n("b622"),r=n("9263"),i=n("9112"),c=s("species"),l=!a((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),f=s("replace"),d=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),p=!a((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,f){var g=s(t),h=!a((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),m=h&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!h||!m||"replace"===t&&(!l||!u||d)||"split"===t&&!p){var w=/./[g],v=n(g,""[t],(function(t,e,n,o,a){return e.exec===r?h&&!a?{done:!0,value:w.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=v[0],S=v[1];o(String.prototype,t,b),o(RegExp.prototype,g,2==e?function(t,e){return S.call(t,this,e)}:function(t){return S.call(t,this)})}f&&i(RegExp.prototype[g],"sham",!0)}},eb84:function(t,e,n){},f1d7:function(t,e,n){}}]);
//# sourceMappingURL=chunk-284114fc.4ea36ee8.js.map